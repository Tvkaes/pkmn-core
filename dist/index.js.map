{"version":3,"sources":["../src/pokemon/parser.ts","../src/pokemon/matchups.ts","../src/pokemon/roles.ts","../src/moves/scorer.ts","../src/moves/filters.ts","../src/moves/sets.ts","../src/battle/damage.ts","../src/battle/engine-adapter.ts","../src/cache/memory.ts","../src/cache/storage.ts","../src/cache/swr.ts","../src/index.ts"],"names":["getStatValue"],"mappings":"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","file":"index.js","sourcesContent":["// Derived from Tvkaes/Pokedex src/services/pokemonService.ts and src/utils/helpers.ts\n// Provides the unified parser and normalization logic for PokeAPI payloads without Vue/Pinia dependencies.\n\nimport type {\n  PokemonAlternateForm,\n  PokemonBundle,\n  PokemonData,\n  PokemonDisplayData,\n  PokemonDetails,\n  PokemonFeaturedAbility,\n  PokemonGridEntry,\n  PokemonSignatureMove,\n  PokemonSpeciesData,\n  Locale,\n} from './types'\n\nconst LANGUAGE_PREFERENCE: Record<Locale, string[]> = {\n  en: ['en'],\n  es: ['es', 'es-la'],\n  ja: ['ja-Hrkt', 'ja'],\n}\n\nconst REGIONAL_VARIANTS = [\n  { keyword: 'alola', region: 'Alola' },\n  { keyword: 'galar', region: 'Galar' },\n  { keyword: 'hisui', region: 'Hisui' },\n  { keyword: 'paldea', region: 'Paldea' },\n]\n\nconst SPECIAL_VARIANT_KEYWORDS = [\n  'attack',\n  'defense',\n  'speed',\n  'school',\n  'shield',\n  'blade',\n  'origin',\n  'sky',\n  'zen',\n  'dawn',\n  'dusk',\n  'midnight',\n  'sunny',\n  'rainy',\n  'snowy',\n  'therian',\n  'incarnate',\n  'resolute',\n  'pirouette',\n  'trash',\n  'sand',\n  'average',\n  'sensu',\n  'pom-pom',\n  'pau',\n  'baile',\n  'heat',\n  'wash',\n  'frost',\n  'fan',\n  'mow',\n]\n\ntype VariantClassification = {\n  kind: NonNullable<PokemonAlternateForm['variantKind']>\n  region?: string\n}\n\nexport interface PokemonParserOptions {\n  locale: Locale\n  featuredAbilityOverride?: PokemonFeaturedAbility | null\n}\n\nexport interface PokemonParseResult {\n  details: PokemonDetails\n  gridEntry: PokemonGridEntry\n}\n\nexport function normalizeIdentifier(identifier: string | number): string {\n  return String(identifier).toLowerCase()\n}\n\nfunction buildLanguagePriority(locale: Locale): string[] {\n  const primary = LANGUAGE_PREFERENCE[locale] ?? LANGUAGE_PREFERENCE.en\n  const fallback = LANGUAGE_PREFERENCE.en\n  const merged = [...primary, ...fallback]\n  return Array.from(new Set(merged))\n}\n\nfunction findByLanguage<T extends { language?: { name?: string } }>(entries: T[] | undefined, locale: Locale): T | undefined {\n  if (!entries?.length) return undefined\n  const priorityOrder = buildLanguagePriority(locale)\n  for (const code of priorityOrder) {\n    const match = entries.find((item) => item.language?.name === code)\n    if (match) {\n      return match\n    }\n  }\n  return undefined\n}\n\nexport function formatPokemonName(name: string): string {\n  if (!name) return ''\n  return name.charAt(0).toUpperCase() + name.slice(1)\n}\n\nexport function formatPokemonId(id: number): string {\n  return `#${String(id).padStart(3, '0')}`\n}\n\nexport function extractDescription(species: PokemonSpeciesData | undefined, locale: Locale = 'en'): string {\n  const entry = findByLanguage(species?.flavor_text_entries, locale)\n  if (!entry) return ''\n  return entry.flavor_text.replace(/\\f|\\n|\\r/g, ' ').trim()\n}\n\nexport function extractGenus(species: PokemonSpeciesData | undefined, locale: Locale = 'en'): string {\n  const genus = findByLanguage(species?.genera, locale)\n  return genus?.genus ?? ''\n}\n\nexport function extractNativeName(species: PokemonSpeciesData | undefined, locale: Locale = 'en'): string {\n  const entry = findByLanguage(species?.names, locale)\n  if (entry?.name) return entry.name\n  if (locale === 'ja') {\n    const japanese = species?.names?.find((item) => item.language?.name === 'ja-Hrkt')\n    if (japanese?.name) return japanese.name\n  }\n  return ''\n}\n\nexport function extractLocalizedDisplayName(\n  data: PokemonData,\n  species: PokemonSpeciesData | undefined,\n  locale: Locale = 'en'\n): string {\n  const localized = findByLanguage(species?.names, locale)?.name\n  if (localized) return localized\n  return formatPokemonName(data.name)\n}\n\nexport function mapStats(pokemon: PokemonData): PokemonDisplayData['stats'] {\n  return pokemon.stats.map((stat) => {\n    const labelMap: Record<string, string> = {\n      hp: 'HP',\n      attack: 'ATK',\n      defense: 'DEF',\n      'special-attack': 'SP. ATK',\n      'special-defense': 'SP. DEF',\n      speed: 'SPD',\n    }\n    const label = labelMap[stat.stat.name] ?? stat.stat.name.toUpperCase()\n    const value = stat.base_stat\n    const percentage = Math.min((value / 255) * 100, 100)\n    return { label, value, percentage }\n  })\n}\n\nexport function selectFeaturedAbility(pokemon: PokemonData): PokemonFeaturedAbility | null {\n  if (!pokemon.abilities?.length) return null\n  const preferred = pokemon.abilities.find((ability) => !ability.is_hidden) ?? pokemon.abilities[0]\n  const slug = preferred?.ability?.name\n  if (!slug) return null\n  return {\n    name: formatPokemonName(slug.replace('-', ' ')),\n    slug,\n    isHidden: preferred.is_hidden,\n  }\n}\n\nexport function formatMoveLabel(name: string): string {\n  return name\n    .split('-')\n    .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))\n    .join(' ')\n}\n\nexport function selectSignatureMoves(data: PokemonData): PokemonSignatureMove[] {\n  if (!data.moves?.length) return []\n\n  const normalized = data.moves\n    .map((entry): PokemonSignatureMove => {\n      const primaryDetail =\n        entry.version_group_details?.find((detail) => detail.move_learn_method?.name === 'level-up') ??\n        entry.version_group_details?.[0]\n\n      if (!primaryDetail) {\n        return {\n          name: formatMoveLabel(entry.move.name),\n        }\n      }\n\n      return {\n        name: formatMoveLabel(entry.move.name),\n        level: primaryDetail.level_learned_at || undefined,\n        method: primaryDetail.move_learn_method?.name ?? undefined,\n        versionGroup: primaryDetail.version_group?.name ?? undefined,\n      }\n    })\n\n  return normalized\n    .sort((a, b) => (b.level ?? 0) - (a.level ?? 0))\n    .slice(0, 4)\n}\n\nexport function createPokemonBundle(\n  data: PokemonData,\n  species: PokemonSpeciesData,\n  alternateForms: PokemonAlternateForm[] = []\n): PokemonBundle {\n  return { data, species, alternateForms }\n}\n\nexport function classifyVariant(name: string): VariantClassification | null {\n  const normalized = name.toLowerCase()\n\n  if (normalized.includes('mega')) {\n    return { kind: 'mega' }\n  }\n\n  if (normalized.includes('primal')) {\n    return { kind: 'primal' }\n  }\n\n  if (normalized.includes('gigantamax') || normalized.includes('gmax') || normalized.includes('dynamax') || normalized.includes('dmax')) {\n    return { kind: 'dynamax' }\n  }\n\n  const regionalMatch = REGIONAL_VARIANTS.find(({ keyword }) => normalized.includes(keyword))\n  if (regionalMatch) {\n    return {\n      kind: 'regional',\n      region: regionalMatch.region,\n    }\n  }\n\n  if (SPECIAL_VARIANT_KEYWORDS.some((keyword) => normalized.includes(keyword))) {\n    return { kind: 'special' }\n  }\n\n  return null\n}\n\nexport function mapDisplayData(\n  bundle: PokemonBundle,\n  locale: Locale,\n  featuredAbilityOverride?: PokemonFeaturedAbility | null\n): PokemonDisplayData {\n  const { data, species, alternateForms } = bundle\n  return {\n    id: data.id,\n    formattedId: formatPokemonId(data.id),\n    name: extractLocalizedDisplayName(data, species, locale),\n    nativeName: extractNativeName(species, 'ja'),\n    description: extractDescription(species, locale),\n    genus: extractGenus(species, locale),\n    stats: mapStats(data),\n    types: data.types,\n    abilities: data.abilities,\n    featuredAbility: featuredAbilityOverride ?? selectFeaturedAbility(data),\n    signatureMoves: selectSignatureMoves(data),\n    height: data.height / 10,\n    weight: data.weight / 10,\n    sprite:\n      data.sprites?.other?.['official-artwork']?.front_default ??\n      data.sprites?.other?.home?.front_default ??\n      data.sprites?.front_default ??\n      '',\n    spriteShiny:\n      data.sprites?.other?.['official-artwork']?.front_shiny ??\n      data.sprites?.other?.home?.front_shiny ??\n      data.sprites?.front_shiny ??\n      null,\n    cryUrl: data.cries?.latest ?? data.cries?.legacy ?? undefined,\n    hasMegaEvolution: alternateForms.length > 0,\n    alternateForms,\n  }\n}\n\nexport function mapGridEntry(bundle: PokemonBundle, locale: Locale): PokemonGridEntry {\n  const { data, species, alternateForms } = bundle\n  return {\n    id: data.id,\n    formattedId: formatPokemonId(data.id),\n    name: extractLocalizedDisplayName(data, species, locale),\n    nativeName: extractNativeName(species, 'ja'),\n    sprite:\n      data.sprites?.other?.['official-artwork']?.front_default ??\n      data.sprites?.other?.home?.front_default ??\n      data.sprites?.front_default ??\n      '',\n    primaryType: data.types?.[0]?.type?.name ?? 'normal',\n    hasMegaEvolution: alternateForms.length > 0,\n    alternateForms: alternateForms.length ? alternateForms : undefined,\n    cryUrl: data.cries?.latest ?? data.cries?.legacy ?? undefined,\n  }\n}\n\nexport function parsePokemon(bundle: PokemonBundle, options: PokemonParserOptions): PokemonParseResult {\n  const display = mapDisplayData(bundle, options.locale, options.featuredAbilityOverride)\n  const primaryType = bundle.data.types?.[0]?.type?.name ?? 'normal'\n  const details: PokemonDetails = {\n    primaryType,\n    raw: bundle.data,\n    species: bundle.species,\n    display,\n  }\n\n  return {\n    details,\n    gridEntry: mapGridEntry(bundle, options.locale),\n  }\n}\n","// Extracted from Tvkaes/Pokedex src/data/type-chart.ts\n// Provides weakness/resistance/cov erage calculations without UI dependencies.\n\nexport type TypeChartEntry = {\n  strongAgainst: string[]\n  weakAgainst: string[]\n  immuneTo: string[]\n}\n\nexport type TypeMatchup = {\n  type: string\n  multiplier: number\n}\n\nexport type OffensiveCoverageEntry = {\n  type: string\n  sources: string[]\n  multiplier: number\n}\n\nexport const TYPE_CHART: Record<string, TypeChartEntry> = {\n  normal: { strongAgainst: [], weakAgainst: ['rock', 'steel'], immuneTo: ['ghost'] },\n  fire: { strongAgainst: ['grass', 'ice', 'bug', 'steel'], weakAgainst: ['fire', 'water', 'rock', 'dragon'], immuneTo: [] },\n  water: { strongAgainst: ['fire', 'ground', 'rock'], weakAgainst: ['water', 'grass', 'dragon'], immuneTo: [] },\n  electric: { strongAgainst: ['water', 'flying'], weakAgainst: ['electric', 'grass', 'dragon'], immuneTo: ['ground'] },\n  grass: {\n    strongAgainst: ['water', 'ground', 'rock'],\n    weakAgainst: ['fire', 'grass', 'poison', 'flying', 'bug', 'dragon', 'steel'],\n    immuneTo: [],\n  },\n  ice: { strongAgainst: ['grass', 'ground', 'flying', 'dragon'], weakAgainst: ['fire', 'water', 'ice', 'steel'], immuneTo: [] },\n  fighting: {\n    strongAgainst: ['normal', 'ice', 'rock', 'dark', 'steel'],\n    weakAgainst: ['poison', 'flying', 'psychic', 'bug', 'fairy'],\n    immuneTo: ['ghost'],\n  },\n  poison: { strongAgainst: ['grass', 'fairy'], weakAgainst: ['poison', 'ground', 'rock', 'ghost'], immuneTo: ['steel'] },\n  ground: { strongAgainst: ['fire', 'electric', 'poison', 'rock', 'steel'], weakAgainst: ['grass', 'bug'], immuneTo: ['flying'] },\n  flying: { strongAgainst: ['grass', 'fighting', 'bug'], weakAgainst: ['electric', 'rock', 'steel'], immuneTo: [] },\n  psychic: { strongAgainst: ['fighting', 'poison'], weakAgainst: ['psychic', 'steel'], immuneTo: ['dark'] },\n  bug: {\n    strongAgainst: ['grass', 'psychic', 'dark'],\n    weakAgainst: ['fire', 'fighting', 'poison', 'flying', 'ghost', 'steel', 'fairy'],\n    immuneTo: [],\n  },\n  rock: { strongAgainst: ['fire', 'ice', 'flying', 'bug'], weakAgainst: ['fighting', 'ground', 'steel'], immuneTo: [] },\n  ghost: { strongAgainst: ['psychic', 'ghost'], weakAgainst: ['dark'], immuneTo: ['normal'] },\n  dragon: { strongAgainst: ['dragon'], weakAgainst: ['steel'], immuneTo: ['fairy'] },\n  dark: { strongAgainst: ['psychic', 'ghost'], weakAgainst: ['fighting', 'dark', 'fairy'], immuneTo: [] },\n  steel: { strongAgainst: ['ice', 'rock', 'fairy'], weakAgainst: ['fire', 'water', 'electric', 'steel'], immuneTo: [] },\n  fairy: { strongAgainst: ['fighting', 'dragon', 'dark'], weakAgainst: ['fire', 'poison', 'steel'], immuneTo: [] },\n}\n\nfunction calculateTypeMultipliers(pokemonTypes: string[]): Record<string, number> {\n  const multipliers: Record<string, number> = {}\n\n  for (const attackingType of Object.keys(TYPE_CHART)) {\n    let modifier = 1\n    for (const rawDefType of pokemonTypes) {\n      const defType = rawDefType.toLowerCase()\n      const chart = TYPE_CHART[attackingType]\n      if (!chart) continue\n\n      if (chart.strongAgainst.includes(defType)) {\n        modifier *= 2\n      } else if (chart.weakAgainst.includes(defType)) {\n        modifier *= 0.5\n      } else if (chart.immuneTo.includes(defType)) {\n        modifier = 0\n        break\n      }\n    }\n    multipliers[attackingType] = modifier\n  }\n\n  return multipliers\n}\n\nexport function getTypeWeaknesses(pokemonTypes: string[]): string[] {\n  const multipliers = calculateTypeMultipliers(pokemonTypes)\n\n  return Object.entries(multipliers)\n    .filter(([, value]) => value > 1)\n    .map(([type]) => type)\n}\n\nexport function getTypeMatchups(pokemonTypes: string[]) {\n  const normalizedTypes = pokemonTypes.map((type) => type.toLowerCase())\n  const multipliers = calculateTypeMultipliers(normalizedTypes)\n\n  const entries: TypeMatchup[] = Object.entries(multipliers).map(([type, multiplier]) => ({\n    type,\n    multiplier,\n  }))\n\n  const weaknesses = entries\n    .filter(({ multiplier }) => multiplier > 1)\n    .sort((a, b) => b.multiplier - a.multiplier)\n  const resistances = entries\n    .filter(({ multiplier }) => multiplier > 0 && multiplier < 1)\n    .sort((a, b) => a.multiplier - b.multiplier)\n  const immunities = entries.filter(({ multiplier }) => multiplier === 0)\n\n  return { weaknesses, resistances, immunities }\n}\n\nexport function getOffensiveCoverage(pokemonTypes: string[]): OffensiveCoverageEntry[] {\n  const normalizedTypes = pokemonTypes.map((type) => type.toLowerCase())\n  const coverage: Record<string, Set<string>> = {}\n\n  for (const type of normalizedTypes) {\n    const entry = TYPE_CHART[type]\n    if (!entry) continue\n\n    for (const target of entry.strongAgainst) {\n      if (!coverage[target]) {\n        coverage[target] = new Set()\n      }\n      coverage[target].add(type)\n    }\n  }\n\n  return Object.entries(coverage)\n    .map(([type, sources]) => ({\n      type,\n      sources: Array.from(sources),\n      multiplier: 2,\n    }))\n    .sort((a, b) => {\n      if (b.sources.length === a.sources.length) {\n        return a.type.localeCompare(b.type)\n      }\n      return b.sources.length - a.sources.length\n    })\n}\n\nexport function getCoverageTargets(attackType: string): string[] {\n  const entry = TYPE_CHART[attackType.toLowerCase()]\n  if (!entry) return []\n  return entry.strongAgainst\n}\n","// Extracted from Tvkaes/Pokedex src/services/competitiveMovesService.ts\n// Provides battle profile determination and role inference based on base stats.\n\nimport type { PokemonStat } from './types'\n\nexport type OffensiveBias = 'physical' | 'special' | 'mixed'\n\nexport interface BattleProfile {\n  offensiveBias: OffensiveBias\n  speed: number\n  isSweeper: boolean\n  isTank: boolean\n  isWallbreaker: boolean\n  isSupport: boolean\n}\n\nexport interface RoleWeights {\n  sweeper: number\n  wallbreaker: number\n  tank: number\n  support: number\n}\n\nconst BULK_THRESHOLD = 335\nconst SWEEPER_SPEED_THRESHOLD = 100\nconst WALLBREAKER_ATTACK_THRESHOLD = 120\nconst SUPPORT_BULK_THRESHOLD = 300\n\nfunction getStatValue(stats: PokemonStat[], name: string): number {\n  return stats.find((stat) => stat.stat.name === name)?.base_stat ?? 0\n}\n\nfunction calculateBulk(stats: PokemonStat[]): number {\n  return (\n    getStatValue(stats, 'hp') +\n    getStatValue(stats, 'defense') +\n    getStatValue(stats, 'special-defense')\n  )\n}\n\nfunction determineOffensiveBias(attack: number, specialAttack: number): OffensiveBias {\n  const difference = attack - specialAttack\n  if (difference > 15) return 'physical'\n  if (difference < -15) return 'special'\n  return 'mixed'\n}\n\nexport function determineBattleProfile(stats: PokemonStat[]): BattleProfile {\n  const attack = getStatValue(stats, 'attack')\n  const specialAttack = getStatValue(stats, 'special-attack')\n  const speed = getStatValue(stats, 'speed')\n  const bulk = calculateBulk(stats)\n\n  const offensiveBias = determineOffensiveBias(attack, specialAttack)\n  const maxOffense = Math.max(attack, specialAttack)\n\n  return {\n    offensiveBias,\n    speed,\n    isSweeper: speed >= SWEEPER_SPEED_THRESHOLD,\n    isTank: bulk >= BULK_THRESHOLD,\n    isWallbreaker: maxOffense >= WALLBREAKER_ATTACK_THRESHOLD,\n    isSupport: bulk >= SUPPORT_BULK_THRESHOLD && speed < SWEEPER_SPEED_THRESHOLD,\n  }\n}\n\nexport function inferRoleWeights(stats: PokemonStat[]): RoleWeights {\n  const profile = determineBattleProfile(stats)\n  const attack = getStatValue(stats, 'attack')\n  const specialAttack = getStatValue(stats, 'special-attack')\n  const speed = getStatValue(stats, 'speed')\n  const bulk = calculateBulk(stats)\n  const maxOffense = Math.max(attack, specialAttack)\n\n  let sweeper = 0\n  let wallbreaker = 0\n  let tank = 0\n  let support = 0\n\n  // Sweeper: high speed + decent offense\n  if (speed >= 90) {\n    sweeper += (speed - 90) * 1.5\n    sweeper += Math.max(0, maxOffense - 80) * 0.8\n  }\n\n  // Wallbreaker: raw power regardless of speed\n  if (maxOffense >= 100) {\n    wallbreaker += (maxOffense - 100) * 2\n    if (speed < 80) wallbreaker += 20 // slow wallbreakers get bonus\n  }\n\n  // Tank: bulk + some offense for longevity\n  if (bulk >= 280) {\n    tank += (bulk - 280) * 0.8\n    if (maxOffense >= 70) tank += 15\n  }\n\n  // Support: bulk without high offense, utility-focused\n  if (bulk >= 260 && maxOffense < 110) {\n    support += (bulk - 260) * 0.6\n    if (speed < 70) support += 10\n  }\n\n  // Normalize weights\n  const total = sweeper + wallbreaker + tank + support || 1\n  return {\n    sweeper: Math.round((sweeper / total) * 100),\n    wallbreaker: Math.round((wallbreaker / total) * 100),\n    tank: Math.round((tank / total) * 100),\n    support: Math.round((support / total) * 100),\n  }\n}\n\nexport function getPrimaryRole(stats: PokemonStat[]): keyof RoleWeights {\n  const weights = inferRoleWeights(stats)\n  const entries = Object.entries(weights) as Array<[keyof RoleWeights, number]>\n  entries.sort((a, b) => b[1] - a[1])\n  const topEntry = entries[0]\n  return topEntry ? topEntry[0] : 'tank'\n}\n\nexport function getViableRoles(stats: PokemonStat[], threshold = 20): Array<keyof RoleWeights> {\n  const weights = inferRoleWeights(stats)\n  return (Object.entries(weights) as Array<[keyof RoleWeights, number]>)\n    .filter(([, weight]) => weight >= threshold)\n    .sort((a, b) => b[1] - a[1])\n    .map(([role]) => role)\n}\n","// Extracted from Tvkaes/Pokedex src/services/competitiveMovesService.ts\n// Provides move scoring logic without external dependencies.\n\nimport type { PokemonMoveData } from '../pokemon/types'\nimport type { MoveScore, MoveRoleTag, ScoringContext } from './types'\nimport { getCoverageTargets } from '../pokemon/matchups'\n\nconst STRONG_STAB_THRESHOLD = 70\n\nconst SETUP_BONUS: Record<string, number> = {\n  'swords-dance': 60,\n  'dragon-dance': 60,\n  'nasty-plot': 60,\n  'calm-mind': 45,\n  'bulk-up': 45,\n  'quiver-dance': 65,\n  'shell-smash': 70,\n  'shift-gear': 55,\n  'coil': 50,\n  'iron-defense': 35,\n  'amnesia': 35,\n  'agility': 40,\n  'rock-polish': 40,\n  'autotomize': 40,\n  'growth': 35,\n  'work-up': 30,\n  'hone-claws': 35,\n}\n\nconst UTILITY_MOVES: Record<string, { score: number; roleTag: MoveRoleTag }> = {\n  'stealth-rock': { score: 70, roleTag: 'hazard' },\n  'spikes': { score: 50, roleTag: 'hazard' },\n  'toxic-spikes': { score: 45, roleTag: 'hazard' },\n  'sticky-web': { score: 55, roleTag: 'hazard' },\n  'defog': { score: 40, roleTag: 'removal' },\n  'rapid-spin': { score: 40, roleTag: 'removal' },\n  'court-change': { score: 35, roleTag: 'removal' },\n  'taunt': { score: 30, roleTag: 'taunt' },\n  'encore': { score: 35, roleTag: 'taunt' },\n  'will-o-wisp': { score: 30, roleTag: 'status' },\n  'toxic': { score: 30, roleTag: 'status' },\n  'thunder-wave': { score: 25, roleTag: 'status' },\n  'glare': { score: 28, roleTag: 'status' },\n  'spore': { score: 50, roleTag: 'status' },\n  'sleep-powder': { score: 35, roleTag: 'status' },\n  'light-screen': { score: 35, roleTag: 'screen' },\n  'reflect': { score: 35, roleTag: 'screen' },\n  'aurora-veil': { score: 50, roleTag: 'screen' },\n  'u-turn': { score: 25, roleTag: 'utility' },\n  'volt-switch': { score: 25, roleTag: 'utility' },\n  'flip-turn': { score: 25, roleTag: 'utility' },\n  'parting-shot': { score: 30, roleTag: 'utility' },\n  'teleport': { score: 20, roleTag: 'utility' },\n  'trick': { score: 25, roleTag: 'utility' },\n  'switcheroo': { score: 25, roleTag: 'utility' },\n  'knock-off': { score: 35, roleTag: 'utility' },\n}\n\nconst RELIABLE_RECOVERY_MOVES = new Set([\n  'recover',\n  'roost',\n  'soft-boiled',\n  'slack-off',\n  'milk-drink',\n  'wish',\n  'synthesis',\n  'moonlight',\n  'morning-sun',\n  'shore-up',\n  'strength-sap',\n  'heal-order',\n  'oblivion-wing',\n  'purify',\n  'pollen-puff',\n  'rest',\n  'giga-drain',\n  'drain-punch',\n  'leech-life',\n  'horn-leech',\n  'draining-kiss',\n  'parabolic-charge',\n])\n\nexport function extractEnglishEffect(move: PokemonMoveData): string {\n  const effectEntry = move.effect_entries?.find((entry) => entry.language.name === 'en')\n  return effectEntry?.short_effect ?? ''\n}\n\nexport function scoreMove(move: PokemonMoveData, context: ScoringContext): MoveScore | null {\n  const typeName = move.type?.name ?? 'normal'\n  const isStab = context.pokemonTypes.includes(typeName)\n  const isDamaging = move.damage_class?.name !== 'status' && (move.power ?? 0) > 0\n  const power = move.power ?? 0\n  let totalScore = 0\n  const tags: MoveRoleTag[] = []\n\n  // Damaging move scoring\n  if (isDamaging) {\n    const accuracyFactor = move.accuracy ? move.accuracy / 100 : 0.85\n    totalScore += power * accuracyFactor\n\n    if (isStab) {\n      totalScore += 25\n      tags.push('stab')\n    }\n\n    // Bias alignment bonus\n    const moveClass = move.damage_class?.name\n    if (\n      (context.offensiveBias === 'physical' && moveClass === 'physical') ||\n      (context.offensiveBias === 'special' && moveClass === 'special')\n    ) {\n      totalScore += 10\n    }\n\n    // Priority bonus\n    if (move.priority > 0) {\n      totalScore += 25\n      tags.push('priority')\n    }\n\n    // Drain/recoil handling\n    if (move.meta?.drain) {\n      if (move.meta.drain > 0) {\n        totalScore += 15\n        tags.push('drain')\n      } else {\n        totalScore -= 10\n      }\n    }\n  }\n\n  // Setup move bonus\n  const setupBonus = SETUP_BONUS[move.name]\n  if (setupBonus) {\n    totalScore += setupBonus\n    tags.push('setup')\n  }\n\n  // Utility move bonus\n  const utilityEntry = UTILITY_MOVES[move.name]\n  if (utilityEntry) {\n    totalScore += utilityEntry.score\n    tags.push(utilityEntry.roleTag)\n    if (utilityEntry.roleTag !== 'utility') {\n      tags.push('utility')\n    }\n  }\n\n  // Recovery bonus\n  if (RELIABLE_RECOVERY_MOVES.has(move.name) || (move.meta?.healing && move.meta.healing > 0)) {\n    totalScore += 50\n    if (!tags.includes('recovery')) {\n      tags.push('recovery')\n    }\n  }\n\n  // Leech Seed special case\n  if (move.name === 'leech-seed') {\n    totalScore += 35\n    if (!tags.includes('recovery')) tags.push('recovery')\n    if (!tags.includes('status')) tags.push('status')\n  }\n\n  // Coverage calculation\n  const coverageTargets = getCoverageTargets(typeName).filter((target) =>\n    context.weaknessCoverage.includes(target)\n  )\n  if (coverageTargets.length && isDamaging && !isStab) {\n    totalScore += 15 + coverageTargets.length * 5\n    tags.push('coverage')\n  }\n\n  if (totalScore <= 0) {\n    return null\n  }\n\n  return {\n    move,\n    score: totalScore,\n    tags,\n    isDamaging,\n    isStab,\n    power,\n    coverageTargets,\n    englishEffect: extractEnglishEffect(move),\n  }\n}\n\nexport function filterViableMoves(scored: Array<MoveScore | null>, minScore = 30): MoveScore[] {\n  return scored\n    .filter((entry): entry is MoveScore => entry !== null && entry.score >= minScore)\n    .sort((a, b) => b.score - a.score)\n}\n\nexport function getMoveRoleTag(move: MoveScore): MoveRoleTag {\n  if (move.tags.includes('setup')) return 'setup'\n  if (move.tags.includes('recovery')) return 'recovery'\n  if (move.tags.includes('hazard')) return 'hazard'\n  if (move.tags.includes('removal')) return 'removal'\n  if (move.tags.includes('taunt')) return 'taunt'\n  if (move.tags.includes('status')) return 'status'\n  if (move.tags.includes('screen')) return 'screen'\n  if (move.tags.includes('coverage')) return 'coverage'\n  if (move.tags.includes('priority')) return 'priority'\n  if (move.tags.includes('stab')) return 'stab'\n  return 'utility'\n}\n\nexport function isStrongStab(move: MoveScore): boolean {\n  return move.isDamaging && move.isStab && move.power >= STRONG_STAB_THRESHOLD\n}\n","// Move filtering and selection utilities for competitive set building.\n// Provides reusable filters without coupling to specific set builders.\n\nimport type { MoveScore, MoveRoleTag } from './types'\nimport type { OffensiveBias } from '../pokemon/roles'\n\nexport interface MoveSelectionOptions {\n  excluded?: Set<string>\n  count?: number\n  minPower?: number\n}\n\nfunction createExclusionSet(excluded?: Set<string>): Set<string> {\n  return excluded ?? new Set()\n}\n\nexport function pickByTag(\n  moves: MoveScore[],\n  tag: MoveRoleTag,\n  options: MoveSelectionOptions = {}\n): MoveScore[] {\n  const { excluded, count = 1 } = options\n  const exclusionSet = createExclusionSet(excluded)\n\n  return moves\n    .filter((move) => move.tags.includes(tag) && !exclusionSet.has(move.move.name))\n    .sort((a, b) => b.score - a.score)\n    .slice(0, count)\n}\n\nexport function pickStrongStab(\n  moves: MoveScore[],\n  offensiveBias: OffensiveBias,\n  options: MoveSelectionOptions = {}\n): MoveScore[] {\n  const { excluded, count = 2, minPower = 70 } = options\n  const exclusionSet = createExclusionSet(excluded)\n\n  const preferredClass = offensiveBias === 'mixed' ? null : offensiveBias\n\n  return moves\n    .filter((move) => {\n      if (!move.isDamaging || !move.isStab || move.power < minPower) return false\n      if (exclusionSet.has(move.move.name)) return false\n      if (preferredClass && move.move.damage_class?.name !== preferredClass) return false\n      return true\n    })\n    .sort((a, b) => b.score - a.score)\n    .slice(0, count)\n}\n\nexport function pickCoverageMoves(\n  moves: MoveScore[],\n  options: MoveSelectionOptions = {}\n): MoveScore[] {\n  const { excluded, count = 2, minPower = 70 } = options\n  const exclusionSet = createExclusionSet(excluded)\n\n  return moves\n    .filter((move) => {\n      if (!move.isDamaging || move.isStab) return false\n      if (exclusionSet.has(move.move.name)) return false\n      return move.tags.includes('coverage') || move.power >= minPower\n    })\n    .sort((a, b) => b.score - a.score)\n    .slice(0, count)\n}\n\nexport function pickRecoveryMove(\n  moves: MoveScore[],\n  options: MoveSelectionOptions = {}\n): MoveScore | null {\n  const { excluded } = options\n  const exclusionSet = createExclusionSet(excluded)\n\n  const candidates = moves\n    .filter((move) => move.tags.includes('recovery') && !exclusionSet.has(move.move.name))\n    .sort((a, b) => b.score - a.score)\n\n  return candidates[0] ?? null\n}\n\nexport function pickStatusMove(\n  moves: MoveScore[],\n  options: MoveSelectionOptions = {}\n): MoveScore | null {\n  const { excluded } = options\n  const exclusionSet = createExclusionSet(excluded)\n\n  const candidates = moves\n    .filter((move) => move.tags.includes('status') && !exclusionSet.has(move.move.name))\n    .sort((a, b) => b.score - a.score)\n\n  return candidates[0] ?? null\n}\n\nexport function pickUtilityMove(\n  moves: MoveScore[],\n  options: MoveSelectionOptions = {}\n): MoveScore | null {\n  const { excluded } = options\n  const exclusionSet = createExclusionSet(excluded)\n\n  const candidates = moves\n    .filter((move) => move.tags.includes('utility') && !exclusionSet.has(move.move.name))\n    .sort((a, b) => b.score - a.score)\n\n  return candidates[0] ?? null\n}\n\nexport function pickSetupMove(\n  moves: MoveScore[],\n  options: MoveSelectionOptions = {}\n): MoveScore | null {\n  const { excluded } = options\n  const exclusionSet = createExclusionSet(excluded)\n\n  const candidates = moves\n    .filter((move) => move.tags.includes('setup') && !exclusionSet.has(move.move.name))\n    .sort((a, b) => b.score - a.score)\n\n  return candidates[0] ?? null\n}\n\nexport function pickPriorityMove(\n  moves: MoveScore[],\n  options: MoveSelectionOptions = {}\n): MoveScore | null {\n  const { excluded } = options\n  const exclusionSet = createExclusionSet(excluded)\n\n  const candidates = moves\n    .filter((move) => move.tags.includes('priority') && !exclusionSet.has(move.move.name))\n    .sort((a, b) => b.score - a.score)\n\n  return candidates[0] ?? null\n}\n\nexport function pickBestDamagingMove(\n  moves: MoveScore[],\n  options: MoveSelectionOptions = {}\n): MoveScore | null {\n  const { excluded } = options\n  const exclusionSet = createExclusionSet(excluded)\n\n  const candidates = moves\n    .filter((move) => move.isDamaging && !exclusionSet.has(move.move.name))\n    .sort((a, b) => b.score - a.score)\n\n  return candidates[0] ?? null\n}\n\nexport function excludeMove(excluded: Set<string>, move: MoveScore | null): void {\n  if (move) {\n    excluded.add(move.move.name)\n  }\n}\n\nexport function excludeMoves(excluded: Set<string>, moves: MoveScore[]): void {\n  for (const move of moves) {\n    excluded.add(move.move.name)\n  }\n}\n","// Competitive set builders for different roles.\n// Uses scorer and filters to construct 4-move sets.\n\nimport type { MoveScore, MoveRecommendation, MoveRoleTag } from './types'\nimport type { BattleProfile } from '../pokemon/roles'\nimport {\n  pickStrongStab,\n  pickCoverageMoves,\n  pickSetupMove,\n  pickRecoveryMove,\n  pickStatusMove,\n  pickUtilityMove,\n  pickByTag,\n  pickBestDamagingMove,\n  excludeMove,\n  excludeMoves,\n} from './filters'\nimport { getMoveRoleTag } from './scorer'\n\nfunction buildReason(moveScore: MoveScore, roleTag: MoveRoleTag | string): string {\n  const parts: string[] = []\n\n  if (moveScore.isDamaging) {\n    const accuracyLabel = moveScore.move.accuracy ? `${moveScore.move.accuracy}%` : 'variable'\n    parts.push(`BP ${moveScore.power} (${accuracyLabel} acc)`)\n  }\n\n  if (moveScore.tags.includes('setup')) {\n    parts.push('Immediate setup')\n  }\n\n  if (moveScore.tags.includes('priority')) {\n    parts.push('Priority move')\n  }\n\n  if (moveScore.tags.includes('stab')) {\n    parts.push('STAB bonus')\n  }\n\n  if (moveScore.coverageTargets.length) {\n    parts.push(`Covers: ${moveScore.coverageTargets.slice(0, 3).join(', ')}`)\n  }\n\n  if (moveScore.tags.includes('recovery')) {\n    parts.push('Reliable recovery')\n  } else if (moveScore.tags.includes('drain')) {\n    parts.push('HP drain')\n  }\n\n  if (moveScore.tags.includes('hazard')) {\n    parts.push('Entry hazard')\n  }\n\n  if (moveScore.tags.includes('removal')) {\n    parts.push('Hazard removal')\n  }\n\n  if (moveScore.tags.includes('taunt')) {\n    parts.push('Blocks setup')\n  }\n\n  if (moveScore.tags.includes('status')) {\n    parts.push('Status condition')\n  }\n\n  if (!parts.length && moveScore.englishEffect) {\n    parts.push(moveScore.englishEffect.slice(0, 60))\n  }\n\n  parts.push(`Role: ${roleTag}`)\n  return parts.join('. ')\n}\n\nfunction toRecommendation(move: MoveScore, roleTag?: MoveRoleTag | string): MoveRecommendation {\n  const tag = roleTag ?? getMoveRoleTag(move)\n  return {\n    name: move.move.name,\n    type: move.move.type?.name ?? 'normal',\n    roleTag: tag,\n    reason: buildReason(move, tag),\n  }\n}\n\nexport function buildSweeperSet(\n  moves: MoveScore[],\n  profile: BattleProfile\n): MoveRecommendation[] {\n  const selection: MoveRecommendation[] = []\n  const excluded = new Set<string>()\n\n  // 1. Setup move (optional but preferred)\n  const setupMove = pickSetupMove(moves, { excluded })\n  if (setupMove) {\n    excludeMove(excluded, setupMove)\n    selection.push(toRecommendation(setupMove, 'setup'))\n  }\n\n  // 2. Two STAB moves\n  const stabMoves = pickStrongStab(moves, profile.offensiveBias, { excluded, count: 2 })\n  if (stabMoves.length < 2) return []\n  excludeMoves(excluded, stabMoves)\n  stabMoves.forEach((m) => selection.push(toRecommendation(m, 'stab')))\n\n  // 3. Coverage or priority finisher\n  const slotsRemaining = 4 - selection.length\n  if (slotsRemaining > 0) {\n    const coverage = pickCoverageMoves(moves, { excluded, count: slotsRemaining })\n    if (coverage.length) {\n      excludeMoves(excluded, coverage)\n      coverage.forEach((m) => selection.push(toRecommendation(m, 'coverage')))\n    }\n  }\n\n  // Fill remaining with best available\n  while (selection.length < 4) {\n    const filler = pickBestDamagingMove(moves, { excluded })\n    if (!filler) break\n    excludeMove(excluded, filler)\n    selection.push(toRecommendation(filler))\n  }\n\n  return selection.length === 4 ? selection : []\n}\n\nexport function buildWallbreakerSet(\n  moves: MoveScore[],\n  profile: BattleProfile\n): MoveRecommendation[] {\n  const selection: MoveRecommendation[] = []\n  const excluded = new Set<string>()\n\n  // 1. Two strong STAB moves\n  const stabMoves = pickStrongStab(moves, profile.offensiveBias, { excluded, count: 2 })\n  if (stabMoves.length < 2) return []\n  excludeMoves(excluded, stabMoves)\n  stabMoves.forEach((m) => selection.push(toRecommendation(m, 'stab')))\n\n  // 2. Two coverage moves\n  const coverage = pickCoverageMoves(moves, { excluded, count: 2 })\n  if (coverage.length < 2) {\n    // Try to fill with any damaging moves\n    const remaining = 2 - coverage.length\n    excludeMoves(excluded, coverage)\n    coverage.forEach((m) => selection.push(toRecommendation(m, 'coverage')))\n\n    for (let i = 0; i < remaining; i++) {\n      const filler = pickBestDamagingMove(moves, { excluded })\n      if (!filler) return []\n      excludeMove(excluded, filler)\n      selection.push(toRecommendation(filler))\n    }\n  } else {\n    excludeMoves(excluded, coverage)\n    coverage.forEach((m) => selection.push(toRecommendation(m, 'coverage')))\n  }\n\n  return selection.length === 4 ? selection : []\n}\n\nexport function buildTankSet(moves: MoveScore[]): MoveRecommendation[] {\n  const selection: MoveRecommendation[] = []\n  const excluded = new Set<string>()\n\n  // 1. One STAB move\n  const stab = moves\n    .filter((m) => m.isDamaging && m.isStab && !excluded.has(m.move.name))\n    .sort((a, b) => b.score - a.score)[0]\n  if (!stab) return []\n  excludeMove(excluded, stab)\n  selection.push(toRecommendation(stab, 'stab'))\n\n  // 2. Recovery move\n  const recovery = pickRecoveryMove(moves, { excluded })\n  if (!recovery) return []\n  excludeMove(excluded, recovery)\n  selection.push(toRecommendation(recovery, 'recovery'))\n\n  // 3. Status move\n  const status = pickStatusMove(moves, { excluded })\n  if (!status) return []\n  excludeMove(excluded, status)\n  selection.push(toRecommendation(status, 'status'))\n\n  // 4. Utility move\n  const utility = pickUtilityMove(moves, { excluded })\n  if (!utility) {\n    // Fallback to any remaining move\n    const fallback = pickBestDamagingMove(moves, { excluded })\n    if (!fallback) return []\n    excludeMove(excluded, fallback)\n    selection.push(toRecommendation(fallback))\n  } else {\n    excludeMove(excluded, utility)\n    selection.push(toRecommendation(utility, getMoveRoleTag(utility)))\n  }\n\n  return selection.length === 4 ? selection : []\n}\n\nexport function buildSupportSet(moves: MoveScore[]): MoveRecommendation[] {\n  const selection: MoveRecommendation[] = []\n  const excluded = new Set<string>()\n\n  const prioritizedTags: MoveRoleTag[] = ['hazard', 'removal', 'taunt', 'screen']\n\n  for (const tag of prioritizedTags) {\n    if (selection.length >= 4) break\n    const candidates = pickByTag(moves, tag, { excluded, count: 1 })\n    if (candidates.length) {\n      excludeMoves(excluded, candidates)\n      candidates.forEach((m) => selection.push(toRecommendation(m, tag)))\n    }\n  }\n\n  // Fill with utility/status\n  if (selection.length < 4) {\n    const utilityMoves = moves\n      .filter(\n        (m) =>\n          !excluded.has(m.move.name) &&\n          (m.tags.includes('utility') || m.tags.includes('status'))\n      )\n      .sort((a, b) => b.score - a.score)\n      .slice(0, 4 - selection.length)\n\n    excludeMoves(excluded, utilityMoves)\n    utilityMoves.forEach((m) => selection.push(toRecommendation(m)))\n  }\n\n  // Fill remaining with STAB\n  if (selection.length < 4) {\n    const stabMoves = moves\n      .filter((m) => m.isStab && !excluded.has(m.move.name))\n      .sort((a, b) => b.score - a.score)\n      .slice(0, 4 - selection.length)\n\n    excludeMoves(excluded, stabMoves)\n    stabMoves.forEach((m) => selection.push(toRecommendation(m, 'stab')))\n  }\n\n  return selection.length === 4 ? selection : []\n}\n\nexport interface CompetitiveSets {\n  sweeper: MoveRecommendation[]\n  wallbreaker: MoveRecommendation[]\n  tank: MoveRecommendation[]\n  support: MoveRecommendation[]\n}\n\nexport function buildAllSets(\n  moves: MoveScore[],\n  profile: BattleProfile\n): CompetitiveSets {\n  return {\n    sweeper: buildSweeperSet(moves, profile),\n    wallbreaker: buildWallbreakerSet(moves, profile),\n    tank: profile.isTank ? buildTankSet(moves) : [],\n    support: buildSupportSet(moves),\n  }\n}\n","// Damage calculation utilities for battle simulation.\n// Implements the standard Pokemon damage formula.\n\nimport type { PokemonStat, PokemonMoveData } from '../pokemon/types'\n\nexport interface DamageContext {\n  level: number\n  attackerStats: PokemonStat[]\n  defenderStats: PokemonStat[]\n  attackerTypes: string[]\n  defenderTypes: string[]\n  move: PokemonMoveData\n  weather?: 'sun' | 'rain' | 'sand' | 'hail' | 'snow' | null\n  terrain?: 'electric' | 'grassy' | 'psychic' | 'misty' | null\n  isCritical?: boolean\n  isStab?: boolean\n  effectiveness?: number\n  otherModifiers?: number\n}\n\nexport interface DamageResult {\n  min: number\n  max: number\n  average: number\n  isCritical: boolean\n  effectiveness: number\n  isStab: boolean\n}\n\nfunction getStatValue(stats: PokemonStat[], name: string): number {\n  return stats.find((stat) => stat.stat.name === name)?.base_stat ?? 0\n}\n\nfunction calculateStatAtLevel(base: number, level: number, iv = 31, ev = 0, nature = 1): number {\n  return Math.floor(((2 * base + iv + Math.floor(ev / 4)) * level) / 100 + 5) * nature\n}\n\nfunction calculateHpAtLevel(base: number, level: number, iv = 31, ev = 0): number {\n  return Math.floor(((2 * base + iv + Math.floor(ev / 4)) * level) / 100 + level + 10)\n}\n\nexport function getTypeEffectiveness(\n  moveType: string,\n  defenderTypes: string[],\n  typeChart: Record<string, { strongAgainst: string[]; weakAgainst: string[]; immuneTo: string[] }>\n): number {\n  let multiplier = 1\n  const chart = typeChart[moveType.toLowerCase()]\n  if (!chart) return multiplier\n\n  for (const defType of defenderTypes) {\n    const normalizedDefType = defType.toLowerCase()\n    if (chart.strongAgainst.includes(normalizedDefType)) {\n      multiplier *= 2\n    } else if (chart.weakAgainst.includes(normalizedDefType)) {\n      multiplier *= 0.5\n    } else if (chart.immuneTo.includes(normalizedDefType)) {\n      multiplier = 0\n      break\n    }\n  }\n\n  return multiplier\n}\n\nexport function calculateBaseDamage(context: DamageContext): number {\n  const { level, attackerStats, defenderStats, move } = context\n  const isPhysical = move.damage_class?.name === 'physical'\n\n  const attackStat = isPhysical ? 'attack' : 'special-attack'\n  const defenseStat = isPhysical ? 'defense' : 'special-defense'\n\n  const attackBase = getStatValue(attackerStats, attackStat)\n  const defenseBase = getStatValue(defenderStats, defenseStat)\n\n  const attack = calculateStatAtLevel(attackBase, level)\n  const defense = calculateStatAtLevel(defenseBase, level)\n  const power = move.power ?? 0\n\n  if (power === 0 || defense === 0) return 0\n\n  // Standard damage formula: ((2 * Level / 5 + 2) * Power * A/D) / 50 + 2\n  const baseDamage = Math.floor(\n    (Math.floor((2 * level) / 5 + 2) * power * attack) / defense / 50 + 2\n  )\n\n  return baseDamage\n}\n\nexport function applyModifiers(\n  baseDamage: number,\n  context: DamageContext\n): { min: number; max: number } {\n  let damage = baseDamage\n\n  // STAB\n  const isStab =\n    context.isStab ??\n    context.attackerTypes.some(\n      (t) => t.toLowerCase() === context.move.type?.name?.toLowerCase()\n    )\n  if (isStab) {\n    damage = Math.floor(damage * 1.5)\n  }\n\n  // Type effectiveness\n  const effectiveness = context.effectiveness ?? 1\n  damage = Math.floor(damage * effectiveness)\n\n  // Weather modifiers\n  if (context.weather) {\n    const moveType = context.move.type?.name?.toLowerCase()\n    if (context.weather === 'sun' && moveType === 'fire') {\n      damage = Math.floor(damage * 1.5)\n    } else if (context.weather === 'sun' && moveType === 'water') {\n      damage = Math.floor(damage * 0.5)\n    } else if (context.weather === 'rain' && moveType === 'water') {\n      damage = Math.floor(damage * 1.5)\n    } else if (context.weather === 'rain' && moveType === 'fire') {\n      damage = Math.floor(damage * 0.5)\n    }\n  }\n\n  // Critical hit\n  const critMultiplier = context.isCritical ? 1.5 : 1\n  damage = Math.floor(damage * critMultiplier)\n\n  // Other modifiers\n  if (context.otherModifiers) {\n    damage = Math.floor(damage * context.otherModifiers)\n  }\n\n  // Random factor (85-100%)\n  const min = Math.floor(damage * 0.85)\n  const max = damage\n\n  return { min, max }\n}\n\nexport function calculateDamage(context: DamageContext): DamageResult {\n  const baseDamage = calculateBaseDamage(context)\n  const { min, max } = applyModifiers(baseDamage, context)\n\n  const isStab =\n    context.isStab ??\n    context.attackerTypes.some(\n      (t) => t.toLowerCase() === context.move.type?.name?.toLowerCase()\n    )\n\n  return {\n    min,\n    max,\n    average: Math.floor((min + max) / 2),\n    isCritical: context.isCritical ?? false,\n    effectiveness: context.effectiveness ?? 1,\n    isStab,\n  }\n}\n\nexport function calculateKOChance(\n  damage: DamageResult,\n  defenderHp: number\n): { ohko: number; twohko: number; threehko: number } {\n  if (defenderHp <= 0) {\n    return { ohko: 100, twohko: 100, threehko: 100 }\n  }\n\n  // Simplified KO chance calculation\n  const ohko = damage.min >= defenderHp ? 100 : damage.max >= defenderHp ? 50 : 0\n  const twohko = damage.min * 2 >= defenderHp ? 100 : damage.max * 2 >= defenderHp ? 75 : 0\n  const threehko = damage.min * 3 >= defenderHp ? 100 : damage.max * 3 >= defenderHp ? 85 : 0\n\n  return { ohko, twohko, threehko }\n}\n","// Engine adapter interface for battle simulation.\n// Provides abstraction layer for different battle engine implementations.\n\nimport type { PokemonData, PokemonMoveData } from '../pokemon/types'\nimport type { DamageResult } from './damage'\n\nexport type BattleWeather = 'sun' | 'rain' | 'sand' | 'hail' | 'snow' | null\nexport type BattleTerrain = 'electric' | 'grassy' | 'psychic' | 'misty' | null\n\nexport interface BattlePokemon {\n  id: string\n  species: string\n  level: number\n  types: string[]\n  stats: {\n    hp: number\n    attack: number\n    defense: number\n    specialAttack: number\n    specialDefense: number\n    speed: number\n  }\n  currentHp: number\n  status: string | null\n  ability: string\n  item: string | null\n  moves: string[]\n  boosts: {\n    attack: number\n    defense: number\n    specialAttack: number\n    specialDefense: number\n    speed: number\n    accuracy: number\n    evasion: number\n  }\n}\n\nexport interface BattleState {\n  turn: number\n  weather: BattleWeather\n  weatherTurns: number\n  terrain: BattleTerrain\n  terrainTurns: number\n  player1: {\n    active: BattlePokemon | null\n    team: BattlePokemon[]\n  }\n  player2: {\n    active: BattlePokemon | null\n    team: BattlePokemon[]\n  }\n}\n\nexport interface BattleAction {\n  type: 'move' | 'switch' | 'item'\n  player: 'player1' | 'player2'\n  moveIndex?: number\n  switchIndex?: number\n  itemId?: string\n}\n\nexport interface BattleEvent {\n  type: 'damage' | 'heal' | 'status' | 'boost' | 'weather' | 'terrain' | 'switch' | 'faint'\n  target: 'player1' | 'player2'\n  data: Record<string, unknown>\n}\n\nexport interface BattleEngineAdapter {\n  initialize(team1: PokemonData[], team2: PokemonData[]): BattleState\n  executeAction(state: BattleState, action: BattleAction): { state: BattleState; events: BattleEvent[] }\n  calculateDamage(attacker: BattlePokemon, defender: BattlePokemon, move: PokemonMoveData, state: BattleState): DamageResult\n  getValidActions(state: BattleState, player: 'player1' | 'player2'): BattleAction[]\n  isGameOver(state: BattleState): { over: boolean; winner: 'player1' | 'player2' | 'draw' | null }\n}\n\nexport function createBattlePokemon(data: PokemonData, level = 50): BattlePokemon {\n  const getStatValue = (name: string): number =>\n    data.stats.find((s) => s.stat.name === name)?.base_stat ?? 0\n\n  const calculateStat = (base: number, isHp = false): number => {\n    const iv = 31\n    const ev = 0\n    if (isHp) {\n      return Math.floor(((2 * base + iv + Math.floor(ev / 4)) * level) / 100 + level + 10)\n    }\n    return Math.floor(((2 * base + iv + Math.floor(ev / 4)) * level) / 100 + 5)\n  }\n\n  const hp = calculateStat(getStatValue('hp'), true)\n\n  return {\n    id: `${data.name}-${Date.now()}`,\n    species: data.name,\n    level,\n    types: data.types.map((t) => t.type.name),\n    stats: {\n      hp,\n      attack: calculateStat(getStatValue('attack')),\n      defense: calculateStat(getStatValue('defense')),\n      specialAttack: calculateStat(getStatValue('special-attack')),\n      specialDefense: calculateStat(getStatValue('special-defense')),\n      speed: calculateStat(getStatValue('speed')),\n    },\n    currentHp: hp,\n    status: null,\n    ability: data.abilities[0]?.ability?.name ?? '',\n    item: null,\n    moves: data.moves.slice(0, 4).map((m) => m.move.name),\n    boosts: {\n      attack: 0,\n      defense: 0,\n      specialAttack: 0,\n      specialDefense: 0,\n      speed: 0,\n      accuracy: 0,\n      evasion: 0,\n    },\n  }\n}\n\nexport function createInitialBattleState(team1: BattlePokemon[], team2: BattlePokemon[]): BattleState {\n  return {\n    turn: 0,\n    weather: null,\n    weatherTurns: 0,\n    terrain: null,\n    terrainTurns: 0,\n    player1: {\n      active: team1[0] ?? null,\n      team: team1,\n    },\n    player2: {\n      active: team2[0] ?? null,\n      team: team2,\n    },\n  }\n}\n\nexport function applyBoost(current: number, stages: number): number {\n  const multipliers = [2 / 8, 2 / 7, 2 / 6, 2 / 5, 2 / 4, 2 / 3, 2 / 2, 3 / 2, 4 / 2, 5 / 2, 6 / 2, 7 / 2, 8 / 2]\n  const index = Math.max(0, Math.min(12, stages + 6))\n  const multiplier = multipliers[index] ?? 1\n  return Math.floor(current * multiplier)\n}\n\nexport function clampBoost(boost: number): number {\n  return Math.max(-6, Math.min(6, boost))\n}\n","// Generic in-memory cache with TTL support.\n// Framework-agnostic, can be used by any consumer.\n// Optimized for PokeAPI's static data patterns.\n\nexport interface CacheEntry<T> {\n  data: T\n  timestamp: number\n  stale?: boolean\n}\n\nexport interface CacheOptions {\n  maxAge?: number\n  maxSize?: number\n  staleAge?: number // Time after maxAge when data is stale but usable\n}\n\n// PokeAPI data is static - use long TTLs\nexport const CACHE_PRESETS = {\n  // For truly static data (pokemon stats, types, etc)\n  STATIC: { maxAge: 1000 * 60 * 60 * 24 * 7, staleAge: 1000 * 60 * 60 * 24 * 30 }, // 7 days fresh, 30 days stale\n  // For semi-static data (species info, forms)\n  SEMI_STATIC: { maxAge: 1000 * 60 * 60 * 24, staleAge: 1000 * 60 * 60 * 24 * 7 }, // 1 day fresh, 7 days stale\n  // For session-only caching\n  SESSION: { maxAge: 1000 * 60 * 60, staleAge: 1000 * 60 * 60 * 4 }, // 1 hour fresh, 4 hours stale\n} as const\n\nconst DEFAULT_MAX_AGE = CACHE_PRESETS.STATIC.maxAge\nconst DEFAULT_STALE_AGE = CACHE_PRESETS.STATIC.staleAge\nconst DEFAULT_MAX_SIZE = 1000\n\nexport interface CacheResult<T> {\n  data: T\n  isStale: boolean\n}\n\nexport class MemoryCache<T> {\n  private cache = new Map<string, CacheEntry<T>>()\n  private readonly maxAge: number\n  private readonly staleAge: number\n  private readonly maxSize: number\n\n  constructor(options: CacheOptions = {}) {\n    this.maxAge = options.maxAge ?? DEFAULT_MAX_AGE\n    this.staleAge = options.staleAge ?? DEFAULT_STALE_AGE\n    this.maxSize = options.maxSize ?? DEFAULT_MAX_SIZE\n  }\n\n  private getEntryStatus(entry: CacheEntry<T> | undefined): 'fresh' | 'stale' | 'expired' {\n    if (!entry) return 'expired'\n    const age = Date.now() - entry.timestamp\n    if (age < this.maxAge) return 'fresh'\n    if (age < this.staleAge) return 'stale'\n    return 'expired'\n  }\n\n  private evictOldest(): void {\n    if (this.cache.size < this.maxSize) return\n\n    let oldestKey: string | null = null\n    let oldestTime = Infinity\n\n    for (const [key, entry] of this.cache) {\n      if (entry.timestamp < oldestTime) {\n        oldestTime = entry.timestamp\n        oldestKey = key\n      }\n    }\n\n    if (oldestKey) {\n      this.cache.delete(oldestKey)\n    }\n  }\n\n  get(key: string): T | undefined {\n    const result = this.getWithStatus(key)\n    return result?.data\n  }\n\n  getWithStatus(key: string): CacheResult<T> | undefined {\n    const entry = this.cache.get(key)\n    const status = this.getEntryStatus(entry)\n    \n    if (status === 'expired') {\n      if (entry) this.cache.delete(key)\n      return undefined\n    }\n    \n    return {\n      data: entry!.data,\n      isStale: status === 'stale',\n    }\n  }\n\n  // Get stale data even if expired (for stale-while-revalidate)\n  getStale(key: string): T | undefined {\n    const entry = this.cache.get(key)\n    return entry?.data\n  }\n\n  set(key: string, data: T): void {\n    this.evictOldest()\n    this.cache.set(key, { data, timestamp: Date.now() })\n  }\n\n  has(key: string): boolean {\n    return this.get(key) !== undefined\n  }\n\n  delete(key: string): boolean {\n    return this.cache.delete(key)\n  }\n\n  clear(): void {\n    this.cache.clear()\n  }\n\n  size(): number {\n    return this.cache.size\n  }\n\n  keys(): string[] {\n    return Array.from(this.cache.keys())\n  }\n}\n\nexport function createCache<T>(options?: CacheOptions): MemoryCache<T> {\n  return new MemoryCache<T>(options)\n}\n\n// Convenience function for creating a fetch wrapper with caching\nexport function withCache<T>(\n  cache: MemoryCache<T>,\n  keyFn: (args: unknown[]) => string,\n  fetchFn: (...args: unknown[]) => Promise<T>\n): (...args: unknown[]) => Promise<T> {\n  return async (...args: unknown[]): Promise<T> => {\n    const key = keyFn(args)\n    const cached = cache.get(key)\n    if (cached !== undefined) {\n      return cached\n    }\n\n    const data = await fetchFn(...args)\n    cache.set(key, data)\n    return data\n  }\n}\n","// Persistent cache implementations for browser environments.\n// Uses localStorage for small data and IndexedDB for larger datasets.\n\nimport type { CacheEntry, CacheOptions, CacheResult } from './memory'\nimport { CACHE_PRESETS } from './memory'\n\nexport interface StorageAdapter {\n  getItem(key: string): Promise<string | null>\n  setItem(key: string, value: string): Promise<void>\n  removeItem(key: string): Promise<void>\n  keys(): Promise<string[]>\n  clear(): Promise<void>\n}\n\n// localStorage adapter (sync but wrapped as async for consistency)\nexport const localStorageAdapter: StorageAdapter = {\n  async getItem(key: string) {\n    if (typeof localStorage === 'undefined') return null\n    return localStorage.getItem(key)\n  },\n  async setItem(key: string, value: string) {\n    if (typeof localStorage === 'undefined') return\n    localStorage.setItem(key, value)\n  },\n  async removeItem(key: string) {\n    if (typeof localStorage === 'undefined') return\n    localStorage.removeItem(key)\n  },\n  async keys() {\n    if (typeof localStorage === 'undefined') return []\n    return Object.keys(localStorage)\n  },\n  async clear() {\n    if (typeof localStorage === 'undefined') return\n    localStorage.clear()\n  },\n}\n\n// IndexedDB adapter for larger datasets\nexport function createIndexedDBAdapter(dbName: string, storeName: string): StorageAdapter {\n  let dbPromise: Promise<IDBDatabase> | null = null\n\n  function getDB(): Promise<IDBDatabase> {\n    if (dbPromise) return dbPromise\n\n    dbPromise = new Promise((resolve, reject) => {\n      if (typeof indexedDB === 'undefined') {\n        reject(new Error('IndexedDB not available'))\n        return\n      }\n\n      const request = indexedDB.open(dbName, 1)\n\n      request.onerror = () => reject(request.error)\n      request.onsuccess = () => resolve(request.result)\n\n      request.onupgradeneeded = () => {\n        const db = request.result\n        if (!db.objectStoreNames.contains(storeName)) {\n          db.createObjectStore(storeName)\n        }\n      }\n    })\n\n    return dbPromise\n  }\n\n  return {\n    async getItem(key: string) {\n      const db = await getDB()\n      return new Promise((resolve, reject) => {\n        const tx = db.transaction(storeName, 'readonly')\n        const store = tx.objectStore(storeName)\n        const request = store.get(key)\n        request.onerror = () => reject(request.error)\n        request.onsuccess = () => resolve(request.result ?? null)\n      })\n    },\n\n    async setItem(key: string, value: string) {\n      const db = await getDB()\n      return new Promise((resolve, reject) => {\n        const tx = db.transaction(storeName, 'readwrite')\n        const store = tx.objectStore(storeName)\n        const request = store.put(value, key)\n        request.onerror = () => reject(request.error)\n        request.onsuccess = () => resolve()\n      })\n    },\n\n    async removeItem(key: string) {\n      const db = await getDB()\n      return new Promise((resolve, reject) => {\n        const tx = db.transaction(storeName, 'readwrite')\n        const store = tx.objectStore(storeName)\n        const request = store.delete(key)\n        request.onerror = () => reject(request.error)\n        request.onsuccess = () => resolve()\n      })\n    },\n\n    async keys() {\n      const db = await getDB()\n      return new Promise((resolve, reject) => {\n        const tx = db.transaction(storeName, 'readonly')\n        const store = tx.objectStore(storeName)\n        const request = store.getAllKeys()\n        request.onerror = () => reject(request.error)\n        request.onsuccess = () => resolve(request.result.map(String))\n      })\n    },\n\n    async clear() {\n      const db = await getDB()\n      return new Promise((resolve, reject) => {\n        const tx = db.transaction(storeName, 'readwrite')\n        const store = tx.objectStore(storeName)\n        const request = store.clear()\n        request.onerror = () => reject(request.error)\n        request.onsuccess = () => resolve()\n      })\n    },\n  }\n}\n\nexport interface PersistentCacheOptions extends CacheOptions {\n  prefix?: string\n  storage?: StorageAdapter\n}\n\nexport class PersistentCache<T> {\n  private readonly prefix: string\n  private readonly storage: StorageAdapter\n  private readonly maxAge: number\n  private readonly staleAge: number\n  private readonly maxSize: number\n  private memoryCache = new Map<string, CacheEntry<T>>()\n\n  constructor(options: PersistentCacheOptions = {}) {\n    this.prefix = options.prefix ?? 'pkmn-cache:'\n    this.storage = options.storage ?? localStorageAdapter\n    this.maxAge = options.maxAge ?? CACHE_PRESETS.STATIC.maxAge\n    this.staleAge = options.staleAge ?? CACHE_PRESETS.STATIC.staleAge\n    this.maxSize = options.maxSize ?? 500\n  }\n\n  private getStorageKey(key: string): string {\n    return `${this.prefix}${key}`\n  }\n\n  private getEntryStatus(entry: CacheEntry<T> | undefined): 'fresh' | 'stale' | 'expired' {\n    if (!entry) return 'expired'\n    const age = Date.now() - entry.timestamp\n    if (age < this.maxAge) return 'fresh'\n    if (age < this.staleAge) return 'stale'\n    return 'expired'\n  }\n\n  async get(key: string): Promise<T | undefined> {\n    const result = await this.getWithStatus(key)\n    return result?.data\n  }\n\n  async getWithStatus(key: string): Promise<CacheResult<T> | undefined> {\n    // Check memory first\n    const memEntry = this.memoryCache.get(key)\n    if (memEntry) {\n      const status = this.getEntryStatus(memEntry)\n      if (status !== 'expired') {\n        return { data: memEntry.data, isStale: status === 'stale' }\n      }\n    }\n\n    // Check persistent storage\n    try {\n      const stored = await this.storage.getItem(this.getStorageKey(key))\n      if (!stored) return undefined\n\n      const entry: CacheEntry<T> = JSON.parse(stored)\n      const status = this.getEntryStatus(entry)\n\n      if (status === 'expired') {\n        await this.storage.removeItem(this.getStorageKey(key))\n        return undefined\n      }\n\n      // Hydrate memory cache\n      this.memoryCache.set(key, entry)\n\n      return { data: entry.data, isStale: status === 'stale' }\n    } catch {\n      return undefined\n    }\n  }\n\n  async getStale(key: string): Promise<T | undefined> {\n    // Memory first\n    const memEntry = this.memoryCache.get(key)\n    if (memEntry) return memEntry.data\n\n    // Then storage\n    try {\n      const stored = await this.storage.getItem(this.getStorageKey(key))\n      if (!stored) return undefined\n      const entry: CacheEntry<T> = JSON.parse(stored)\n      return entry.data\n    } catch {\n      return undefined\n    }\n  }\n\n  async set(key: string, data: T): Promise<void> {\n    const entry: CacheEntry<T> = { data, timestamp: Date.now() }\n\n    // Set in memory\n    this.memoryCache.set(key, entry)\n\n    // Evict if over size\n    if (this.memoryCache.size > this.maxSize) {\n      const keys = Array.from(this.memoryCache.keys())\n      const oldest = keys[0]\n      if (oldest) this.memoryCache.delete(oldest)\n    }\n\n    // Persist\n    try {\n      await this.storage.setItem(this.getStorageKey(key), JSON.stringify(entry))\n    } catch {\n      // Storage full or unavailable - continue with memory only\n    }\n  }\n\n  async delete(key: string): Promise<boolean> {\n    this.memoryCache.delete(key)\n    try {\n      await this.storage.removeItem(this.getStorageKey(key))\n      return true\n    } catch {\n      return false\n    }\n  }\n\n  async clear(): Promise<void> {\n    this.memoryCache.clear()\n    try {\n      const keys = await this.storage.keys()\n      const prefixedKeys = keys.filter((k) => k.startsWith(this.prefix))\n      await Promise.all(prefixedKeys.map((k) => this.storage.removeItem(k)))\n    } catch {\n      // Ignore storage errors\n    }\n  }\n\n  has(key: string): boolean {\n    return this.memoryCache.has(key)\n  }\n\n  size(): number {\n    return this.memoryCache.size\n  }\n}\n\nexport function createPersistentCache<T>(options?: PersistentCacheOptions): PersistentCache<T> {\n  return new PersistentCache<T>(options)\n}\n\nexport function createIndexedDBCache<T>(\n  dbName = 'pkmn-core',\n  storeName = 'cache',\n  options?: Omit<PersistentCacheOptions, 'storage'>\n): PersistentCache<T> {\n  return new PersistentCache<T>({\n    ...options,\n    storage: createIndexedDBAdapter(dbName, storeName),\n  })\n}\n","// Stale-While-Revalidate pattern implementation.\n// Returns cached data immediately while fetching fresh data in background.\n\nimport type { CacheResult } from './memory'\nimport { MemoryCache, CACHE_PRESETS } from './memory'\nimport { PersistentCache } from './storage'\n\nexport interface SWROptions {\n  dedupe?: boolean // Dedupe concurrent requests for same key\n  dedupeInterval?: number // Time window for deduplication (ms)\n  onError?: (error: unknown, key: string) => void\n  onSuccess?: (data: unknown, key: string, isRevalidation: boolean) => void\n}\n\ntype CacheInterface<T> = {\n  get(key: string): T | undefined | Promise<T | undefined>\n  getWithStatus(key: string): CacheResult<T> | undefined | Promise<CacheResult<T> | undefined>\n  getStale(key: string): T | undefined | Promise<T | undefined>\n  set(key: string, data: T): void | Promise<void>\n}\n\nexport class SWRCache<T> {\n  private cache: CacheInterface<T>\n  private inflight = new Map<string, Promise<T>>()\n  private lastFetch = new Map<string, number>()\n  private readonly dedupe: boolean\n  private readonly dedupeInterval: number\n  private readonly onError?: (error: unknown, key: string) => void\n  private readonly onSuccess?: (data: unknown, key: string, isRevalidation: boolean) => void\n\n  constructor(cache: CacheInterface<T>, options: SWROptions = {}) {\n    this.cache = cache\n    this.dedupe = options.dedupe ?? true\n    this.dedupeInterval = options.dedupeInterval ?? 2000\n    this.onError = options.onError\n    this.onSuccess = options.onSuccess\n  }\n\n  private shouldDedupe(key: string): boolean {\n    if (!this.dedupe) return false\n    const last = this.lastFetch.get(key)\n    if (!last) return false\n    return Date.now() - last < this.dedupeInterval\n  }\n\n  async get(\n    key: string,\n    fetcher: () => Promise<T>\n  ): Promise<T> {\n    // Check cache first\n    const cached = await this.cache.getWithStatus(key)\n\n    if (cached && !cached.isStale) {\n      // Fresh data - return immediately\n      return cached.data\n    }\n\n    // Check for inflight request\n    const inflight = this.inflight.get(key)\n    if (inflight) {\n      // Return stale data if available, otherwise wait for inflight\n      if (cached) return cached.data\n      return inflight\n    }\n\n    // Check dedupe\n    if (this.shouldDedupe(key)) {\n      const stale = await this.cache.getStale(key)\n      if (stale !== undefined) return stale\n    }\n\n    // Need to fetch\n    const fetchPromise = this.fetch(key, fetcher, !!cached)\n\n    // If we have stale data, return it immediately\n    if (cached) {\n      // Revalidate in background\n      fetchPromise.catch(() => {\n        // Error handled in fetch()\n      })\n      return cached.data\n    }\n\n    // No cached data - must wait for fetch\n    return fetchPromise\n  }\n\n  private async fetch(\n    key: string,\n    fetcher: () => Promise<T>,\n    isRevalidation: boolean\n  ): Promise<T> {\n    this.lastFetch.set(key, Date.now())\n\n    const promise = fetcher()\n    this.inflight.set(key, promise)\n\n    try {\n      const data = await promise\n      await this.cache.set(key, data)\n      this.onSuccess?.(data, key, isRevalidation)\n      return data\n    } catch (error) {\n      this.onError?.(error, key)\n      throw error\n    } finally {\n      this.inflight.delete(key)\n    }\n  }\n\n  async revalidate(key: string, fetcher: () => Promise<T>): Promise<T> {\n    return this.fetch(key, fetcher, true)\n  }\n\n  async mutate(key: string, data: T): Promise<void> {\n    await this.cache.set(key, data)\n  }\n\n  isValidating(key: string): boolean {\n    return this.inflight.has(key)\n  }\n}\n\nexport function createSWR<T>(\n  cache?: CacheInterface<T>,\n  options?: SWROptions\n): SWRCache<T> {\n  const defaultCache = new MemoryCache<T>(CACHE_PRESETS.STATIC)\n  return new SWRCache<T>(cache ?? defaultCache, options)\n}\n\nexport function createPersistentSWR<T>(\n  cache: PersistentCache<T>,\n  options?: SWROptions\n): SWRCache<T> {\n  return new SWRCache<T>(cache, options)\n}\n\n// Convenience function for PokeAPI-style fetching\nexport function createPokeAPIFetcher<T>(\n  baseUrl: string,\n  cache?: CacheInterface<T>,\n  options?: SWROptions\n): (endpoint: string) => Promise<T> {\n  const swr = createSWR<T>(cache, options)\n\n  return async (endpoint: string): Promise<T> => {\n    const url = endpoint.startsWith('http') ? endpoint : `${baseUrl}${endpoint}`\n    const key = url\n\n    return swr.get(key, async () => {\n      const response = await fetch(url)\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`)\n      }\n      return response.json() as Promise<T>\n    })\n  }\n}\n","// pkmn-core - Pure TypeScript Pokemon logic library\n// No UI, no frameworks, no DOM dependencies\n\n// Pokemon module - types, parsing, matchups, roles\nexport * from './pokemon'\n\n// Moves module - scoring, filtering, competitive sets\nexport * from './moves'\n\n// Battle module - damage calculation, engine adapter\nexport * from './battle'\n\n// Cache module - generic memory caching\nexport * from './cache'\n\n// Version\nexport const VERSION = '0.1.1'\n"]}